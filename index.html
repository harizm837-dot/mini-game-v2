<!DOCTYPE html>
<html lang="mn">
<head>
<meta charset="UTF-8">
<title>‚≠ê AZHUR GAME ‚≠ê</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
body{margin:0;font-family:Arial,sans-serif;text-align:center;color:white;
background:linear-gradient(120deg,#0f2027,#203a43,#2c5364);transition:background 0.5s;overflow-x:hidden;}
h1{margin-top:20px}
button{padding:10px 18px;margin:6px;border:none;border-radius:8px;font-size:16px;cursor:pointer;}
#panel{display:flex;justify-content:space-around;flex-wrap:wrap;margin:10px;}
#game{height:65vh;position:relative;overflow:hidden;border:2px solid #fff;border-radius:12px;background:rgba(0,0,0,0.2);}
.star,.bomb,.boss,.particle,.popup{position:absolute;cursor:pointer;user-select:none;}
.star,.bomb,.boss{transition: transform 0.3s ease-out;}
.particle{font-size:16px;pointer-events:none;transition: all 0.7s ease-out;}
.popup{font-weight:bold;pointer-events:none;transition: all 0.7s ease-out;}
#startScreen,#overlay{position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,.88);
display:flex;flex-direction:column;justify-content:center;align-items:center;z-index:10;}
#overlay{display:none}
#modeButtons button{width:180px;}
#pauseBtn{background:#444;}
#audioBtn{background:#444;}
#timerBar{width:90%;height:10px;background:rgba(255,255,255,0.3);margin:6px auto;border-radius:5px;overflow:hidden;}
#timerFill{width:100%;height:100%;background:#ffd700;transition:width 1s linear;}
#instructions{display:none;font-size:14px;color:#fff;margin:10px;text-align:left;}
#backBtn{background:#444;}
</style>
</head>
<body>

<div id="startScreen">
  <h1>‚≠ê AZHUR GAME ‚≠ê</h1>
  <p>–•“Ø“Ø—Ö–¥“Ø“Ø–¥—ç—ç, –∞–∞–≤ –Ω—å –∏–ª“Ø“Ø —Å–∞–π–Ω—ã–≥ —Ö–∏–π–∂ ”©–≥–Ω”© ”©”©üòéüíô</p>
  <div id="modeButtons">
    <button onclick="selectMode('Az')">‚≠ê –ê–∑—Ö—É—Ä Mode ‚≠ê</button>
    <button onclick="selectMode('Iv')">‚≠ê –ò–≤—ç—ç–ª—Ç Mode ‚≠ê</button>
    <button onclick="selectMode('Ari')">‚≠ê –ê—Ä–∏—É–Ω—Ö—É—Ä Mode ‚≠ê</button>
  </div>
  <button id="audioBtn" onclick="toggleAudio()">üîä –î—É—É ON/OFF</button>
  <button onclick="toggleInstructions()">‚ÑπÔ∏è –¢–æ–≥–ª–æ–æ–º—ã–Ω –∑–∞–∞–≤–∞—Ä</button>
  <div id="instructions">
    <strong>–¢–æ–≥–ª–æ–æ–º—ã–Ω –∑–∞–∞–≤–∞—Ä:</strong><br>
    ‚≠ê-–≥ –¥–∞—Ä–∂ –æ–Ω–æ–æ –∞–≤–∞—Ö<br>
    üí£-–≥ –¥–∞—Ä–≤–∞–ª –∞–º—å —Ö–∞—Å–∞–≥–¥–∞–Ω–∞<br>
    üëæ Boss-–≥ –¥–∞—Ä–∂ –∞–ª–≤–∞–ª –Ω—ç–º—ç–ª—Ç –æ–Ω–æ–æ –∞–≤–Ω–∞<br>
    Level –∞—Ö–∏—Ö–∞–¥ –æ–¥ –±–æ–ª–æ–Ω boss –Ω—ç–º—ç–≥–¥—ç–Ω—ç<br>
    –•—É–≥–∞—Ü–∞–∞ –¥—É—É—Å–∞—Ö–∞–∞—Å ”©–º–Ω”© –±“Ø—Ö –æ–¥—ã–≥ –¥–∞—Ä–≤–∞–ª level –∞—Ö–∏–Ω–∞<br>
    –î–∞—Ö–∏–Ω —Ç–æ–≤—á–ª—É—É—Ä –¥–∞—Ä–≤–∞–ª —ç–Ω—ç –∑–∞–∞–≤–∞—Ä —Ö–∞–∞–≥–¥–∞–Ω–∞
  </div>
</div>

<h1>‚≠ê AZHUR GAME ‚≠ê</h1>
<div id="msg">–ê–∑—Ö—É—Ä –º—É–Ω–¥–∞–≥! üí™</div>
<div id="panel">
  <div>“Æ–µ: <span id="level">1</span></div>
  <div>–û–Ω–æ–æ: <span id="score">0</span></div>
  <div>‚ù§Ô∏è <span id="life">3</span></div>
  <div>üèÜ Best: <span id="bestLevel">1</span></div>
</div>
<div id="timerBar"><div id="timerFill"></div></div>
<div>
  <button onclick="restartGame()">üîÑ Restart</button>
  <button id="pauseBtn" onclick="togglePause()">‚è∏ Pause</button>
  <button id="backBtn" onclick="backToStart()">üè† Home</button>
</div>
<div id="game"></div>

<div id="overlay">
  <h2 id="overMsg"></h2>
  <button onclick="startGame()">‚ñ∂ –î–∞—Ö–∏–Ω —Ç–æ–≥–ª–æ—Ö</button>
</div>

<script>
let score=0, level=1, life=3, mode='Az', gameTimer, timeLeft=20, paused=false, combo=0;
let bestLevel=JSON.parse(localStorage.getItem("bestLevel")||'{"Az":1,"Iv":1,"Ari":1}');
let bestScore=JSON.parse(localStorage.getItem("bestScore")||'{"Az":0,"Iv":0,"Ari":0}');
let audioOn=true, bossInterval;

const game=document.getElementById("game");
const msg=document.getElementById("msg");

const modes = {
  'Az':{name:'–ê–∑—Ö—É—Ä –∞–∞',life:3,boss:true,starSize:36,bombSize:36,bossSize:50,popupColor:'yellow',popupSize:24,difficulty:'hard'},
  'Iv':{name:'–ò–≤—ç—ç–ª—Ç —Ö“Ø“Ø –º–∏–Ω—å',life:4,boss:true,starSize:28,bombSize:32,bossSize:44,popupColor:'lime',popupSize:22,difficulty:'medium'},
  'Ari':{name:'–ê—Ä–∏—É–Ω—Ö—É—Ä –æ—Ö–∏–Ω –º–∏–Ω—å',life:5,boss:true,starSize:32,bombSize:34,bossSize:48,popupColor:'pink',popupSize:26,difficulty:'easy'}
};

const praise = {
  'Az':["–ê–∑—Ö—É—Ä –∞–∞, —á–∏ “Ø–Ω—ç—Ö—ç—ç—Ä –º—É–Ω–¥–∞–≥ —Ö“Ø“Ø! üí™","–Ø–º–∞—Ä —Å–∞–π–Ω —Ç–æ–≥–ª–æ–∂ –±–∞–π–Ω–∞ –∞–∞! ‚≠ê","–ß–∏ —á–∞–¥–ª–∞–∞, –ê–∑—Ö—É—Ä! üöÄ"],
  'Iv':["–ò–≤—ç—ç–ª—Ç —Ö“Ø“Ø –º–∏–Ω—å, —á–∏ –≥–∞–π—Ö–∞–ª—Ç–∞–π! üí™","–ò–≤—ç—ç–ª—Ç —Ö“Ø“Ø –º–∏–Ω—å, –ê–∞–≤—ã–Ω Superman üíû‚≠ê"],
  'Ari':["–ê—Ä–∏—É–Ω—Ö—É—Ä –æ—Ö–∏–Ω –º–∏–Ω—å, “Ø–Ω—ç—Ö—ç—ç—Ä –º—É–Ω–¥–∞–≥! üíñ","–ê—Ä–∏—É–Ω—Ö—É—Ä –æ—Ö–∏–Ω –º–∏–Ω—å, –ê–∞–≤—ã–Ω —Ö–∞–π—Ä—Ç–∞–π –≥“Ø–Ω–∂ —à“Ø“Øüòòüíûüåü"]
};

const starSound=new Audio('https://freesound.org/data/previews/331/331912_3248244-lq.mp3');
const bombSound=new Audio('https://freesound.org/data/previews/276/276031_4486188-lq.mp3');
const bossSound=new Audio('https://freesound.org/data/previews/331/331914_3248244-lq.mp3');

function toggleAudio(){ audioOn=!audioOn; document.getElementById("audioBtn").innerText = audioOn ? "üîä –î—É—É ON" : "üîá –î—É—É OFF"; }
function toggleInstructions(){document.getElementById("instructions").style.display=(document.getElementById("instructions").style.display==="none")?"block":"none";}
function selectMode(m){ mode=m; life=modes[m].life; document.getElementById("life").innerText=life; startGame(); }
function backToStart(){ clearInterval(gameTimer); clearInterval(bossInterval); document.getElementById("startScreen").style.display="flex"; document.getElementById("overlay").style.display="none"; game.innerHTML=""; }
function startGame(){document.getElementById("startScreen").style.display="none"; document.getElementById("overlay").style.display="none";
score=0; level=1; life=modes[mode].life; paused=false; combo=0; nextLevel(); updateUI();}
function restartGame(){ clearInterval(gameTimer); clearInterval(bossInterval); startGame(); }
function togglePause(){ paused=!paused; document.getElementById("pauseBtn").innerText = paused ? "‚ñ∂ Resume" : "‚è∏ Pause"; }

function updateUI(){
  document.getElementById("score").innerText=score;
  document.getElementById("level").innerText=level;
  document.getElementById("life").innerText=life;
  if(level>bestLevel[mode]){ bestLevel[mode]=level; localStorage.setItem("bestLevel",JSON.stringify(bestLevel)); }
  if(score>bestScore[mode]){ bestScore[mode]=score; localStorage.setItem("bestScore",JSON.stringify(bestScore)); }
  document.getElementById("bestLevel").innerText=bestLevel[mode];
  msg.innerText=praise[mode][Math.floor(Math.random()*praise[mode].length)];
}

function nextLevel(){
  clearInterval(gameTimer); clearInterval(bossInterval);
  game.innerHTML=""; timeLeft=20; combo=0;
  const fonts=["Arial","Courier New","Verdana","Tahoma"];
  const bgs=["linear-gradient(120deg,#0f2027,#203a43,#2c5364)","linear-gradient(120deg,#11998e,#38ef7d)",
  "linear-gradient(120deg,#fc4a1a,#f7b733)","linear-gradient(120deg,#1a2a6c,#b21f1f,#fdbb2d)","linear-gradient(120deg,#8360c3,#2ebf91)"];
  document.body.style.fontFamily=fonts[level%fonts.length];
  document.body.style.background=bgs[level%bgs.length];

  let starsCount=Math.floor(1+level*(modes[mode].difficulty==='hard'?1:0.6));
  let bombsCount=(mode==='Iv'?1:(mode==='Ari'?1:2));
  let bossCount=(level>=3 && modes[mode].boss?1:0);

  for(let i=0;i<starsCount;i++) spawnStar();
  for(let i=0;i<bombsCount;i++) spawnBomb();
  for(let i=0;i<bossCount;i++) spawnBoss();

  updateTimerBar();
  gameTimer=setInterval(()=>{
    if(!paused){ timeLeft--; updateTimerBar(); if(timeLeft<=0) gameOver(); }
  },1000);
}

// SPAWN –æ–¥
function spawnStar(){
  const s=document.createElement("div"); s.className="star"; s.innerText="‚≠ê";
  s.style.fontSize=modes[mode].starSize+"px";
  s.style.left=Math.random()*80+"%"; s.style.top=Math.random()*70+"%";
  let dy = -0.3-Math.random()*0.2;
  s.animInterval=setInterval(()=>{
    if(!paused){
      let top=parseFloat(s.style.top); top+=dy;
      if(top<0) top=70;
      s.style.top=top+"%";
    }
  },30);
  s.onclick=()=>{
    combo++; score+=10+combo*2;
    showPopup("+"+(10+combo*2),s.offsetLeft,s.offsetTop);
    if(audioOn) starSound.play();
    clearInterval(s.animInterval); s.remove(); checkLevelComplete(); updateUI();
  };
  game.appendChild(s);
}

// SPAWN –±–æ–º–±
function spawnBomb(){
  const b=document.createElement("div"); b.className="bomb"; b.innerText="üí£";
  b.style.fontSize=modes[mode].bombSize+"px";
  b.style.left=Math.random()*80+"%"; b.style.top=Math.random()*70+"%";
  let dy = -0.1-Math.random()*0.2; // —Ö”©–≤–∂ —Ö”©–¥”©–ª–Ω”©
  b.animInterval=setInterval(()=>{
    if(!paused){ let top=parseFloat(b.style.top); top+=dy; if(top<0) top=70; b.style.top=top+"%"; }
  },30);
  b.onclick=()=>{
    life--; combo=0; if(audioOn) bombSound.play();
    if(navigator.vibrate) navigator.vibrate(200); b.remove(); updateUI();
    if(life<=0) gameOver();
  };
  game.appendChild(b);
}

// SPAWN boss
function spawnBoss(){
  let hp=3;
  const boss=document.createElement("div"); boss.className="boss"; boss.innerText="üëæ";
  boss.style.fontSize=modes[mode].bossSize+"px";
  boss.style.left="45%"; boss.style.top="40%";
  game.appendChild(boss);
  bossInterval=setInterval(()=>{
    if(!paused){ boss.style.left=Math.random()*80+"%"; boss.style.top=Math.random()*70+"%"; }
  },700-(level*10));
  boss.onclick=()=>{
    hp--; combo++; score+=10+combo*2; showPopup("+"+(10+combo*2),boss.offsetLeft,boss.offsetTop);
    if(audioOn) bossSound.play();
    if(hp<=0){ boss.remove(); checkLevelComplete(); updateUI(); }
  };
}

// POPUP
function showPopup(text,x,y){
  const p=document.createElement("div"); p.className="popup"; p.innerText=text;
  p.style.left=x+"px"; p.style.top=y+"px"; p.style.color=modes[mode].popupColor;
  p.style.fontSize=modes[mode].popupSize+"px"; game.appendChild(p);
  setTimeout(()=>{p.style.transform="translateY(-30px)"; p.style.opacity="0";},10);
  setTimeout(()=>p.remove(),700);
}

// CHECK LEVEL COMPLETE
function checkLevelComplete(){
  if(!game.querySelector(".star") && !game.querySelector(".boss")){
    level++; nextLevel(); updateUI();
  }
}

// TIMER
function updateTimerBar(){ document.getElementById("timerFill").style.width=(timeLeft/20*100)+"%"; }

// GAME OVER
function gameOver(){
  clearInterval(gameTimer); clearInterval(bossInterval);
  document.getElementById("overlay").style.display="flex";
  document.getElementById("overMsg").innerHTML=
    `${modes[mode].name}, —á–∏ “Ø–Ω—ç—Ö—ç—ç—Ä —Å–∞–π–Ω —Ç–æ–≥–ª–æ–ª–æ–æ üíô<br>
     Level: ${level}<br>
     –û–Ω–æ–æ: ${score}<br><br>
     –ê–∞–≤ –Ω—å —á–∞–º–∞–∞—Ä –±–∞—Ö–∞—Ä—Ö–∞–∂ –±–∞–π–Ω–∞!`;
}
</script>
</body>
</html>
