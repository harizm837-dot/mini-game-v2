<!DOCTYPE html>
<html lang="mn">
<head>
<meta charset="UTF-8">
<title>‚≠ê AZHUR GAME ‚≠ê</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
body{
  margin:0;
  font-family:Arial,sans-serif;
  text-align:center;
  color:white;
  background:linear-gradient(120deg,#0f2027,#203a43,#2c5364);
  transition: background 0.5s, font-family 0.5s;
  overflow-x:hidden;
}
h1{margin-top:20px}
button{
  padding:10px 18px;
  margin:6px;
  border:none;
  border-radius:8px;
  font-size:16px;
  cursor:pointer;
}
#panel{
  display:flex;
  justify-content:space-around;
  flex-wrap:wrap;
  margin:10px;
}
#game{
  height:65vh;
  position:relative;
  overflow:hidden;
  border:2px solid #fff;
  border-radius:12px;
  background:rgba(0,0,0,0.2);
}
.star,.bomb,.boss,.particle{
  position:absolute;
  cursor:pointer;
  user-select:none;
}
.star{font-size:32px; transition: transform 0.3s ease-out;}
.bomb{font-size:34px;}
.boss{font-size:48px; transition: left 0.5s, top 0.5s;}
.particle{font-size:16px; pointer-events:none; transition: all 0.7s ease-out;}
#startScreen,#overlay{
  position:fixed;
  top:0;left:0;
  width:100%;height:100%;
  background:rgba(0,0,0,.88);
  display:flex;
  flex-direction:column;
  justify-content:center;
  align-items:center;
  z-index:10;
}
#overlay{display:none}
#modeButtons button{width:180px;}
#pauseBtn{background:#444;}
#audioBtn{background:#444;}
#timerBar{
  width:90%;
  height:10px;
  background:rgba(255,255,255,0.3);
  margin:6px auto;
  border-radius:5px;
  overflow:hidden;
}
#timerFill{
  width:100%;
  height:100%;
  background:#ffd700;
  transition: width 1s linear;
}
#instructions{
  font-size:14px;
  color:#fff;
  margin:10px;
  text-align:left;
}
</style>
</head>
<body>

<div id="startScreen">
  <h1>‚≠ê AZHUR GAME ‚≠ê</h1>
  <p>–•“Ø“Ø—Ö–¥“Ø“Ø–¥—ç—ç, –∞–∞–≤ –Ω—å –∏–ª“Ø“Ø —Å–∞–π–Ω—ã–Ω–≥ —Ö–∏–π–∂ ”©–≥–Ω”© ”©”©üòéüíô</p>
  <div id="modeButtons">
    <button onclick="selectMode('Az')">‚≠ê –ê–∑—Ö—É—Ä Mode ‚≠ê</button>
    <button onclick="selectMode('Iv')">‚≠ê –ò–≤—ç—ç–ª—Ç Mode ‚≠ê</button>
    <button onclick="selectMode('Ari')">‚≠ê –ê—Ä–∏—É–Ω—Ö—É—Ä Mode ‚≠ê</button>
  </div>
  <button id="audioBtn" onclick="toggleAudio()">üîä –î—É—É ON/OFF</button>
  <div id="instructions">
    <strong>–¢–æ–≥–ª–æ–æ–º—ã–Ω –∑–∞–∞–≤–∞—Ä:</strong><br>
    ‚≠ê-–≥ –¥–∞—Ä–∂ –æ–Ω–æ–æ –∞–≤–∞—Ö<br>
    üí£-–≥ –¥–∞—Ä–≤–∞–ª –∞–º—å —Ö–∞—Å–∞–≥–¥–∞–Ω–∞<br>
    üëæ Boss-–≥ –¥–∞—Ä–∂ –∞–ª–≤–∞–ª –Ω—ç–º—ç–ª—Ç –æ–Ω–æ–æ –∞–≤–Ω–∞<br>
    Level –∞—Ö–∏—Ö–∞–¥ –æ–¥ –±–æ–ª–æ–Ω boss –Ω—ç–º—ç–≥–¥—ç–Ω—ç<br>
    –•—É–≥–∞—Ü–∞–∞ –¥—É—É—Å–∞—Ö–∞–∞—Å ”©–º–Ω”© –±“Ø—Ö –æ–¥—ã–≥ –¥–∞—Ä–≤–∞–ª level –∞—Ö–∏–Ω–∞
  </div>
</div>

<h1>‚≠ê AZHUR GAME ‚≠ê</h1>
<div id="msg">–ê–∑—Ö—É—Ä –º—É–Ω–¥–∞–≥! üí™</div>
<div id="panel">
  <div>“Æ–µ: <span id="level">1</span></div>
  <div>–û–Ω–æ–æ: <span id="score">0</span></div>
  <div>‚ù§Ô∏è <span id="life">3</span></div>
  <div>üèÜ Best: <span id="bestLevel">1</span></div>
</div>
<div id="timerBar"><div id="timerFill"></div></div>
<div>
  <button onclick="restartGame()">üîÑ Restart</button>
  <button id="pauseBtn" onclick="togglePause()">‚è∏ Pause</button>
</div>
<div id="game"></div>

<div id="overlay">
  <h2 id="overMsg"></h2>
  <button onclick="startGame()">‚ñ∂ –î–∞—Ö–∏–Ω —Ç–æ–≥–ª–æ—Ö</button>
</div>

<script>
let score=0, level=1, life=3, mode='Az', gameTimer, timeLeft=20, paused=false;
let bestLevel=localStorage.getItem("bestLevel")||1;
let audioOn=true;
let bossInterval;
let combo=0;
const game=document.getElementById("game");
const msg=document.getElementById("msg");
const overlay=document.getElementById("overlay");

const modes = {
  'Az':{name:'–ê–∑—Ö—É—Ä –∞–∞',life:3,boss:true},
  'Iv':{name:'–ò–≤—ç—ç–ª—Ç —Ö“Ø“Ø –º–∏–Ω—å',life:4,boss:true},
  'Ari':{name:'–ê—Ä–∏—É–Ω—Ö—É—Ä –æ—Ö–∏–Ω –º–∏–Ω—å',life:5,boss:true}
};
const praise = {
  'Az':["–ê–∑—Ö—É—Ä –∞–∞, —á–∏ “Ø–Ω—ç—Ö—ç—ç—Ä –º—É–Ω–¥–∞–≥ —Ö“Ø“Ø! üí™","–Ø–º–∞—Ä —Å–∞–π–Ω —Ç–æ–≥–ª–æ–∂ –±–∞–π–Ω–∞ –∞–∞! ‚≠ê","–ß–∏ —á–∞–¥–ª–∞–∞, –ê–∑—Ö—É—Ä! üöÄ"],
  'Iv':["–ò–≤—ç—ç–ª—Ç —Ö“Ø“Ø –º–∏–Ω—å, —á–∏ –≥–∞–π—Ö–∞–ª—Ç–∞–π! üí™","–ò–≤—ç—ç–ª—Ç —Ö“Ø“Ø –º–∏–Ω—å, –ê–∞–≤—ã–Ω Superman üíû‚≠ê"],
  'Ari':["–ê—Ä–∏—É–Ω—Ö—É—Ä –æ—Ö–∏–Ω –º–∏–Ω—å, “Ø–Ω—ç—Ö—ç—ç—Ä –º—É–Ω–¥–∞–≥! üíñ","–ê—Ä–∏—É–Ω—Ö—É—Ä –æ—Ö–∏–Ω –º–∏–Ω—å, –ê–∞–≤—ã–Ω —Ö–∞–π—Ä—Ç–∞–π –≥“Ø–Ω–∂ —à“Ø“Øüòòüíûüåü"]
};

const starSound=new Audio('https://freesound.org/data/previews/331/331912_3248244-lq.mp3');
const bombSound=new Audio('https://freesound.org/data/previews/276/276031_4486188-lq.mp3');
const bossSound=new Audio('https://freesound.org/data/previews/331/331914_3248244-lq.mp3');

const fonts=["Arial","Courier New","Verdana","Tahoma"];
const backgrounds=[
  "linear-gradient(120deg,#0f2027,#203a43,#2c5364)",
  "linear-gradient(120deg,#11998e,#38ef7d)",
  "linear-gradient(120deg,#fc4a1a,#f7b733)",
  "linear-gradient(120deg,#1a2a6c,#b21f1f,#fdbb2d)",
  "linear-gradient(120deg,#8360c3,#2ebf91)"
];
let fontIndex=0, bgIndex=0;

function selectMode(m){
  mode=m;
  life=modes[m].life;
  document.getElementById("life").innerText=life;
  fontIndex=0; bgIndex=0;
  document.body.style.fontFamily=fonts[fontIndex];
  document.body.style.background=backgrounds[bgIndex];
  startGame();
}

function toggleAudio(){ audioOn=!audioOn; document.getElementById("audioBtn").innerText = audioOn ? "üîä –î—É—É ON" : "üîá –î—É—É OFF"; }
function startGame(){
  document.getElementById("startScreen").style.display="none";
  overlay.style.display="none";
  score=0; level=1; life=modes[mode].life; paused=false; combo=0;
  fontIndex=0; bgIndex=0;
  document.body.style.fontFamily=fonts[fontIndex];
  document.body.style.background=backgrounds[bgIndex];
  nextLevel();
  updateUI();
}
function restartGame(){ clearInterval(gameTimer); clearInterval(bossInterval); startGame(); }
function togglePause(){ paused=!paused; document.getElementById("pauseBtn").innerText = paused ? "‚ñ∂ Resume" : "‚è∏ Pause"; }
function updateUI(){
  document.getElementById("score").innerText=score;
  document.getElementById("level").innerText=level;
  document.getElementById("life").innerText=life;
  if(level>bestLevel){ bestLevel=level; localStorage.setItem("bestLevel",bestLevel); }
  document.getElementById("bestLevel").innerText=bestLevel;
  msg.innerText=praise[mode][Math.floor(Math.random()*praise[mode].length)];
}

function nextLevel(){
  clearInterval(gameTimer); clearInterval(bossInterval);
  game.innerHTML="";
  timeLeft=20; combo=0;
  fontIndex=(fontIndex+1)%fonts.length;
  bgIndex=(bgIndex+1)%backgrounds.length;
  document.body.style.fontFamily=fonts[fontIndex];
  document.body.style.background=backgrounds[bgIndex];

  let starsCount=Math.floor(1+level*0.5);
  let bombsCount=(mode==='Iv'?2:(mode==='Ari'?1:2));
  let bossCount=(level>=3 && modes[mode].boss?1:0);

  for(let i=0;i<starsCount;i++) spawnStar();
  for(let i=0;i<bombsCount;i++) spawnBomb();
  for(let i=0;i<bossCount;i++) spawnBoss();

  updateTimerBar();
  gameTimer=setInterval(()=>{
    if(!paused){ timeLeft--; updateTimerBar(); if(timeLeft<=0) gameOver(); }
  },1000);
}

// ---------- SPAWN ----------
function spawnStar(){
  const s=document.createElement("div"); s.className="star"; s.innerText="‚≠ê";
  s.style.left=Math.random()*80+"%"; s.style.top=Math.random()*70+"%";
  let dx=(Math.random()*2-1)*0.2; let dy=(Math.random()*2-1)*0.2;
  s.animInterval=setInterval(()=>{
    if(!paused){
      let left=parseFloat(s.style.left), top=parseFloat(s.style.top);
      left+=dx; top+=dy;
      if(left<0||left>80) dx*=-1; if(top<0||top>70) dy*=-1;
      s.style.left=left+"%"; s.style.top=top+"%";
    }
  },30);
  s.onclick=()=>{
    clearInterval(s.animInterval); combo++; score+=10+combo*2;
    if(audioOn) starSound.play();
    createParticle(s.offsetLeft,s.offsetTop,'yellow',5);
    s.remove();
    checkLevelComplete();
  };
  game.appendChild(s);
}

function spawnBomb(){
  const b=document.createElement("div"); b.className="bomb"; b.innerText="üí£";
  b.style.left=Math.random()*80+"%"; b.style.top=Math.random()*70+"%";
  b.onclick=()=>{
    life--; combo=0; if(audioOn) bombSound.play();
    createParticle(b.offsetLeft,b.offsetTop,'red',8);
    if(navigator.vibrate) navigator.vibrate(200);
    game.style.transform="translate(5px,0)";
    setTimeout(()=>{game.style.transform="translate(0,0)";},100);
    b.remove(); updateUI();
    if(life<=0) gameOver();
  };
  game.appendChild(b);
}

function spawnBoss(){
  let hp=3;
  const boss=document.createElement("div"); boss.className="boss"; boss.innerText="üëæ";
  boss.style.left="45%"; boss.style.top="40%";
  game.appendChild(boss);
  bossInterval=setInterval(()=>{
    if(!paused){ boss.style.left=Math.random()*80+"%"; boss.style.top=Math.random()*70+"%"; }
  },800);
  boss.onclick=()=>{
    hp--; combo++; score+=10+combo*2;
    msg.innerText=`${modes[mode].name}, –º—É–Ω–¥–∞–≥ –±–∞–π–ª–∞–∞ —Ö–∞–π—Ä—Ç–∞–π —à“Ø“Øü´Ç üëä`;
    if(audioOn) bossSound.play();
    createParticle(boss.offsetLeft,boss.offsetTop,'cyan',12);
    if(hp<=0){ boss.remove(); combo=0;
      for(let i=0;i<20;i++){ createParticle(boss.offsetLeft+Math.random()*50-25,boss.offsetTop+Math.random()*50-25,['#ffd700','#ff69b4','#00ffff'][Math.floor(Math.random()*3)],10); }
      checkLevelComplete();
    }
  };
}

// ---------- PARTICLE ----------
function createParticle(x,y,color,count){
  for(let i=0;i<count;i++){
    const p=document.createElement("div"); p.className="particle"; p.innerText="‚ú®";
    p.style.left=x+"px"; p.style.top=y+"px"; p.style.color=color;
    game.appendChild(p);
    const dx=(Math.random()*2-1)*30; const dy=(Math.random()*-1)*30-10;
    setTimeout(()=>{ p.style.transform=`translate(${dx}px,${dy}px) scale(0)`; p.style.opacity="0"; },10);
    setTimeout(()=>p.remove(),700);
  }
}

// ---------- CHECK LEVEL COMPLETE ----------
function checkLevelComplete(){
  if(!game.querySelector(".star") && !game.querySelector(".boss")){
    level++; nextLevel(); updateUI();
  }
}

// ---------- TIMER ----------
function updateTimerBar(){
  document.getElementById("timerFill").style.width=(timeLeft/20*100)+"%";
}

// ---------- GAME OVER ----------
function gameOver(){
  clearInterval(gameTimer); clearInterval(bossInterval);
  overlay.style.display="flex";
  document.getElementById("overMsg").innerHTML=
    `${modes[mode].name}, —á–∏ “Ø–Ω—ç—Ö—ç—ç—Ä —Å–∞–π–Ω —Ç–æ–≥–ª–æ–ª–æ–æ üíô<br>
     Level: ${level}<br>
     –û–Ω–æ–æ: ${score}<br><br>
     –ê–∞–≤ –Ω—å —á–∞–º–∞–∞—Ä –±–∞—Ö–∞—Ä—Ö–∞–∂ –±–∞–π–Ω–∞!`;
}
</script>
</body>
</html>
